jasmine.Queue=function(e){this.env=e,this.ensured=[],this.blocks=[],this.running=!1,this.index=0,this.offset=0,this.abort=!1},jasmine.Queue.prototype.addBefore=function(e,t){t===jasmine.undefined&&(t=!1),this.blocks.unshift(e),this.ensured.unshift(t)},jasmine.Queue.prototype.add=function(e,t){t===jasmine.undefined&&(t=!1),this.blocks.push(e),this.ensured.push(t)},jasmine.Queue.prototype.insertNext=function(e,t){t===jasmine.undefined&&(t=!1),this.ensured.splice(this.index+this.offset+1,0,t),this.blocks.splice(this.index+this.offset+1,0,e),this.offset++},jasmine.Queue.prototype.start=function(e){this.running=!0,this.onComplete=e,this.next_()},jasmine.Queue.prototype.isRunning=function(){return this.running},jasmine.Queue.LOOP_DONT_RECURSE=!0,jasmine.Queue.prototype.next_=function(){var e=this,t=!0;while(t){t=!1;if(e.index<e.blocks.length&&(!this.abort||!!this.ensured[e.index])){var n=!0,r=!1,i=function(){if(jasmine.Queue.LOOP_DONT_RECURSE&&n){r=!0;return}e.blocks[e.index].abort&&(e.abort=!0),e.offset=0,e.index++;var i=(new Date).getTime();e.env.updateInterval&&i-e.env.lastUpdate>e.env.updateInterval?(e.env.lastUpdate=i,e.env.setTimeout(function(){e.next_()},0)):jasmine.Queue.LOOP_DONT_RECURSE&&r?t=!0:e.next_()};e.blocks[e.index].execute(i),n=!1,r&&i()}else e.running=!1,e.onComplete&&e.onComplete()}},jasmine.Queue.prototype.results=function(){var e=new jasmine.NestedResults;for(var t=0;t<this.blocks.length;t++)this.blocks[t].results&&e.addResult(this.blocks[t].results());return e};