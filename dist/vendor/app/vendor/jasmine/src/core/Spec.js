jasmine.Spec=function(e,t,n){if(!e)throw new Error("jasmine.Env() required");if(!t)throw new Error("jasmine.Suite() required");var r=this;r.id=e.nextSpecId?e.nextSpecId():null,r.env=e,r.suite=t,r.description=n,r.queue=new jasmine.Queue(e),r.afterCallbacks=[],r.spies_=[],r.results_=new jasmine.NestedResults,r.results_.description=n,r.matchersClass=null},jasmine.Spec.prototype.getFullName=function(){return this.suite.getFullName()+" "+this.description+"."},jasmine.Spec.prototype.results=function(){return this.results_},jasmine.Spec.prototype.log=function(){return this.results_.log(arguments)},jasmine.Spec.prototype.runs=function(e){var t=new jasmine.Block(this.env,e,this);return this.addToQueue(t),this},jasmine.Spec.prototype.addToQueue=function(e){this.queue.isRunning()?this.queue.insertNext(e):this.queue.add(e)},jasmine.Spec.prototype.addMatcherResult=function(e){this.results_.addResult(e)},jasmine.Spec.prototype.expect=function(e){var t=new(this.getMatchersClass_())(this.env,e,this);return t.not=new(this.getMatchersClass_())(this.env,e,this,!0),t},jasmine.Spec.prototype.waits=function(e){var t=new jasmine.WaitsBlock(this.env,e,this);return this.addToQueue(t),this},jasmine.Spec.prototype.waitsFor=function(e,t,n){var r=null,i=null,s=null;for(var o=0;o<arguments.length;o++){var u=arguments[o];switch(typeof u){case"function":r=u;break;case"string":i=u;break;case"number":s=u}}var a=new jasmine.WaitsForBlock(this.env,s,r,i,this);return this.addToQueue(a),this},jasmine.Spec.prototype.fail=function(e){var t=new jasmine.ExpectationResult({passed:!1,message:e?jasmine.util.formatException(e):"Exception",trace:{stack:e.stack}});this.results_.addResult(t)},jasmine.Spec.prototype.getMatchersClass_=function(){return this.matchersClass||this.env.matchersClass},jasmine.Spec.prototype.addMatchers=function(e){var t=this.getMatchersClass_(),n=function(){t.apply(this,arguments)};jasmine.util.inherit(n,t),jasmine.Matchers.wrapInto_(e,n),this.matchersClass=n},jasmine.Spec.prototype.finishCallback=function(){this.env.reporter.reportSpecResults(this)},jasmine.Spec.prototype.finish=function(e){this.removeAllSpies(),this.finishCallback(),e&&e()},jasmine.Spec.prototype.after=function(e){this.queue.isRunning()?this.queue.add(new jasmine.Block(this.env,e,this),!0):this.afterCallbacks.unshift(e)},jasmine.Spec.prototype.execute=function(e){var t=this;if(!t.env.specFilter(t)){t.results_.skipped=!0,t.finish(e);return}this.env.reporter.reportSpecStarting(this),t.env.currentSpec=t,t.addBeforesAndAftersToQueue(),t.queue.start(function(){t.finish(e)})},jasmine.Spec.prototype.addBeforesAndAftersToQueue=function(){var e=this.env.currentRunner(),t;for(var n=this.suite;n;n=n.parentSuite)for(t=0;t<n.before_.length;t++)this.queue.addBefore(new jasmine.Block(this.env,n.before_[t],this));for(t=0;t<e.before_.length;t++)this.queue.addBefore(new jasmine.Block(this.env,e.before_[t],this));for(t=0;t<this.afterCallbacks.length;t++)this.queue.add(new jasmine.Block(this.env,this.afterCallbacks[t],this),!0);for(n=this.suite;n;n=n.parentSuite)for(t=0;t<n.after_.length;t++)this.queue.add(new jasmine.Block(this.env,n.after_[t],this),!0);for(t=0;t<e.after_.length;t++)this.queue.add(new jasmine.Block(this.env,e.after_[t],this),!0)},jasmine.Spec.prototype.explodes=function(){throw"explodes function should not have been called"},jasmine.Spec.prototype.spyOn=function(e,t,n){if(e==jasmine.undefined)throw"spyOn could not find an object to spy upon for "+t+"()";if(!n&&e[t]===jasmine.undefined)throw t+"() method does not exist";if(!n&&e[t]&&e[t].isSpy)throw new Error(t+" has already been spied upon");var r=jasmine.createSpy(t);return this.spies_.push(r),r.baseObj=e,r.methodName=t,r.originalValue=e[t],e[t]=r,r},jasmine.Spec.prototype.removeAllSpies=function(){for(var e=0;e<this.spies_.length;e++){var t=this.spies_[e];t.baseObj[t.methodName]=t.originalValue}this.spies_=[]};