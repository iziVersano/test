describe("HtmlReporter",function(){function e(e){return{getFullName:function(){return e}}}function t(e,t){var n=[];for(var r=0;r<e.length;r++)e[r].className==t&&n.push(e[r]);return n}function n(e,n){var r=t(e,n);if(r.length>0)return r[0];throw new Error("couldn't find div with class "+n)}var r,i,s,o;beforeEach(function(){r=new jasmine.Env,r.updateInterval=0,s=document.createElement("body"),o={body:s,location:{search:""}},i=new jasmine.HtmlReporter(o)}),it("should run only specs beginning with spec parameter",function(){o.location.search="?spec=run%20this",expect(i.specFilter(e("run this"))).toBeTruthy(),expect(i.specFilter(e("not the right spec"))).toBeFalsy(),expect(i.specFilter(e("not run this"))).toBeFalsy()}),describe("running without any specs",function(){var e;beforeEach(function(){e=r.currentRunner(),r.addReporter(i)}),it("should not error",function(){var t=function(){e.execute()};expect(t).not.toThrow()})}),describe("Matcher reporting",function(){var e=function(e){var t=e.getElementsByTagName("div");for(var n=0;n<t.length;n++)if(t[n].className.match(/resultMessage/))return t[n]},t,n,u;beforeEach(function(){u=new jasmine.FakeTimer,r.setTimeout=u.setTimeout,r.clearTimeout=u.clearTimeout,r.setInterval=u.setInterval,r.clearInterval=u.clearInterval,t=r.currentRunner();var e=new jasmine.Suite(r,"some suite");t.add(e),n=new jasmine.Spec(r,e,"some spec"),e.add(n),o.location.search="?",r.addReporter(i)}),describe("toContain",function(){it("should show actual and expected",function(){n.runs(function(){this.expect("foo").toContain("bar")}),t.execute(),u.tick(0);var r=e(s);expect(r.innerHTML).toMatch(/foo/),expect(r.innerHTML).toMatch(/bar/)})})}),describe("failure messages (integration)",function(){var e,t,o;it("should add the failure message to the DOM (non-toEquals matchers)",function(){r.describe("suite",function(){r.it("will have log messages",function(){this.expect("a").toBeNull()})}),r.addReporter(i),r.execute();var e=s.getElementsByTagName("div"),t=n(e,"resultMessage fail");expect(t.innerHTML).toMatch(/Expected 'a' to be null/)}),it("should add the failure message to the DOM (non-toEquals matchers) html escaping",function(){r.describe("suite",function(){r.it("will have log messages",function(){this.expect("1 < 2").toBeNull()})}),r.addReporter(i),r.execute();var e=s.getElementsByTagName("div"),t=n(e,"resultMessage fail");expect(t.innerHTML).toMatch(/Expected '1 &lt; 2' to be null/)})}),describe("log messages",function(){it("should appear in the report of a failed spec",function(){r.describe("suite",function(){r.it("will have log messages",function(){this.log("this is a","multipart log message"),this.expect(!0).toBeFalsy()})}),r.addReporter(i),r.execute();var e=s.getElementsByTagName("div"),t=n(e,"specDetail failed");expect(t.innerHTML).toMatch("this is a multipart log message")}),xit("should work on IE without console.log.apply",function(){})}),describe("duplicate example names",function(){it("should report failures correctly",function(){var e=r.describe("suite",function(){r.it("will have log messages",function(){this.log("this one fails!"),this.expect(!0).toBeFalsy()})}),t=r.describe("suite",function(){r.it("will have log messages",function(){this.log("this one passes!"),this.expect(!0).toBeTruthy()})});r.addReporter(i),r.execute();var o=s.getElementsByTagName("div"),u=n(o,"specDetail failed");expect(u.className).toEqual("specDetail failed"),expect(u.innerHTML).toContain("this one fails!"),expect(u.innerHTML).not.toContain("this one passes!")})}),describe("#reportSpecStarting",function(){beforeEach(function(){r.describe("suite 1",function(){r.it("spec 1",function(){})}),spyOn(i,"log").andCallThrough()}),it("DOES NOT log running specs by default",function(){r.addReporter(i),r.execute(),expect(i.log).not.toHaveBeenCalled()}),it("logs running specs when log_running_specs is true",function(){i.logRunningSpecs=!0,r.addReporter(i),r.execute(),expect(i.log).toHaveBeenCalledWith(">> Jasmine Running suite 1 spec 1...")})})});