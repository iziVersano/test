describe("TrivialReporter",function(){function e(e){return{getFullName:function(){return e}}}function t(e,t){var n=[];for(var r=0;r<e.length;r++)e[r].className==t&&n.push(e[r]);return n}function n(e,n){var r=t(e,n);if(r.length>0)return r[0];throw new Error("couldn't find div with class "+n)}var r,i,s,o;beforeEach(function(){r=new jasmine.Env,r.updateInterval=0,s=document.createElement("body"),o={body:s,location:{search:""}},i=new jasmine.TrivialReporter(o)}),it("should run only specs beginning with spec parameter",function(){o.location.search="?spec=run%20this",expect(i.specFilter(e("run this"))).toBeTruthy(),expect(i.specFilter(e("not the right spec"))).toBeFalsy(),expect(i.specFilter(e("not run this"))).toBeFalsy()}),it("should display empty divs for every suite when the runner is starting",function(){i.reportRunnerStarting({env:r,suites:function(){return[new jasmine.Suite({},"suite 1",null,null)]}});var e=t(s.getElementsByTagName("div"),"suite");expect(e.length).toEqual(1),expect(e[0].innerHTML).toContain("suite 1")}),describe("Matcher reporting",function(){var e=function(e){var t=e.getElementsByTagName("div");for(var n=0;n<t.length;n++)if(t[n].className.match(/resultMessage/))return t[n]},t,n,u;beforeEach(function(){u=new jasmine.FakeTimer,r.setTimeout=u.setTimeout,r.clearTimeout=u.clearTimeout,r.setInterval=u.setInterval,r.clearInterval=u.clearInterval,t=r.currentRunner();var e=new jasmine.Suite(r,"some suite");t.add(e),n=new jasmine.Spec(r,e,"some spec"),e.add(n),o.location.search="?",r.addReporter(i)}),describe("toContain",function(){it("should show actual and expected",function(){n.runs(function(){this.expect("foo").toContain("bar")}),t.execute(),u.tick(0);var r=e(s);expect(r.innerHTML).toMatch(/foo/),expect(r.innerHTML).toMatch(/bar/)})})}),describe("failure messages (integration)",function(){var e,t,o;beforeEach(function(){t={passed:function(){return!1},getItems:function(){}};var n=new jasmine.Suite(r,"suite 1",null,null);e={suite:n,getFullName:function(){return"foo"},results:function(){return t}},i.reportRunnerStarting({env:r,suites:function(){return[n]}})}),it("should add the failure message to the DOM (non-toEquals matchers)",function(){o=new jasmine.ExpectationResult({matcherName:"toBeNull",passed:!1,message:"Expected 'a' to be null, but it was not"}),spyOn(t,"getItems").andReturn([o]),i.reportSpecResults(e);var r=s.getElementsByTagName("div"),u=n(r,"resultMessage fail");expect(u.innerHTML).toEqual("Expected 'a' to be null, but it was not")}),it("should add the failure message to the DOM (non-toEquals matchers) html escaping",function(){o=new jasmine.ExpectationResult({matcherName:"toBeNull",passed:!1,message:"Expected '1 < 2' to <b>e null, & it was not"}),spyOn(t,"getItems").andReturn([o]),i.reportSpecResults(e);var r=s.getElementsByTagName("div"),u=n(r,"resultMessage fail");expect(u.innerHTML).toEqual("Expected '1 &lt; 2' to &lt;b&gt;e null, &amp; it was not")})}),describe("log messages",function(){it("should appear in the report",function(){r.describe("suite",function(){r.it("will have log messages",function(){this.log("this is a","multipart log message")})}),r.addReporter(i),r.execute();var e=s.getElementsByTagName("div"),t=n(e,"resultMessage log");expect(t.innerHTML).toEqual("this is a multipart log message")}),xit("should work on IE without console.log.apply",function(){})}),describe("duplicate example names",function(){it("should report failures correctly",function(){var e=r.describe("suite",function(){r.it("will have log messages",function(){this.log("this one fails!"),this.expect(!0).toBeFalsy()})}),t=r.describe("suite",function(){r.it("will have log messages",function(){this.log("this one passes!"),this.expect(!0).toBeTruthy()})});r.addReporter(i),r.execute();var o=s.getElementsByTagName("div"),u=n(o,"suite passed");expect(u.className).toEqual("suite passed"),expect(u.innerHTML).toContain("this one passes!"),expect(u.innerHTML).not.toContain("this one fails!");var a=n(o,"suite failed");expect(a.className).toEqual("suite failed"),expect(a.innerHTML).toContain("this one fails!"),expect(a.innerHTML).not.toContain("this one passes!")})}),describe("#reportSpecStarting",function(){var e;beforeEach(function(){r.describe("suite 1",function(){e=r.it("spec 1",function(){})})}),it("DOES NOT log running specs by default",function(){spyOn(i,"log"),i.reportSpecStarting(e),expect(i.log).not.toHaveBeenCalled()}),it("logs running specs when log_running_specs is true",function(){i.logRunningSpecs=!0,spyOn(i,"log"),i.reportSpecStarting(e),expect(i.log).toHaveBeenCalledWith(">> Jasmine Running suite 1 spec 1...")})})});